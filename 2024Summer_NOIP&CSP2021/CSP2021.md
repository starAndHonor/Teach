---
marp: true
size: 16:9
theme: am_blue
paginate: true
headingDivider: [2,3]
footer: \ *starAndHonor* *堆* *2024年7月15日*
---

<!-- _class: cover_a 
<!-- _header: "" --> 
<!-- _footer: "" --> 
<!-- _paginate: "" --> 
# CSP2021
###### 真题
starAndHonor
北师大台州附属高级中学
2024.7.26

## 课程内容

<!-- _class: cols2_ol_ci fglass toc_a  -->
<!-- _footer: "" -->
<!-- _header: "CONTENTS" -->
<!-- _paginate: "" -->

- [廊桥分配](#3)
- [括号序列](#8)
- [回文](#13) 
- [交通规划](#15)
## [CSP-S 2021] 廊桥分配

当一架飞机抵达机场时，可以停靠在航站楼旁的廊桥，也可以停靠在位于机场边缘的远机位。乘客一般更期待停靠在廊桥，因为这样省去了坐摆渡车前往航站楼的周折。然而，因为廊桥的数量有限，所以这样的愿望不总是能实现。

机场分为国内区和国际区，国内航班飞机只能停靠在国内区，国际航班飞机只能停靠在国际区。一部分廊桥属于国内区，其余的廊桥属于国际区。

L 市新建了一座机场，一共有 $n$ 个廊桥。该机场决定，廊桥的使用遵循“先到先得”的原则，即每架飞机抵达后，如果相应的区（国内/国际）还有空闲的廊桥，就停靠在廊桥，否则停靠在远机位（假设远机位的数量充足）。该机场只有一条跑道，因此不存在两架飞机同时抵达的情况。

现给定未来一段时间飞机的抵达、离开时刻，请你负责将 $n$ 个廊桥分配给国内区和国际区，使停靠廊桥的飞机数量最多。
## 
**Hint1**:设F(x)表示国内机场有x个廊桥时的停靠在廊桥的最大国内航班飞机数
设G(x)表示国际机场有x个廊桥时的停靠在廊桥的最大国际航班飞机数
则结果为 
$$
\begin{equation}

    \mathop{\max}_{i = 0}^{n} F(i) + G(n-i)

\end{equation}   
$$
##
**Hint2**:只需求F(x)和G(x),x=0,1,2,……，注意到F(x)与G(x)同构且独立。下面以求F(x)为例:
认为飞机就是区间$(a_i,b_i)$位于时间轴上
考虑数学归纳法，
x = 0,F(x) = 0
设x = i停靠的飞机集合为S,飞机全集为U
则x = i+1时,求出$C_US$的最大区间不相交子集，记作T
$S^{\prime}$ = $S \cup T$为最优
**Hint3**因为“先到先得”，新加入一个廊桥肯定是不会影响到已经有廊桥的飞机，等价于本来停在新廊桥的飞机刚开始停入了远机位
##
**Hint4**:使用类似前缀和方式递推F(x),
求最大区间不相交子集，先取$C_US$最小$a_i$的区间，之后不断找到$a_i$为飞出飞机的$b_i$的后继的飞机停入。
使用set维护
## 
暴力1：枚举分给国内多少廊桥，先按$a_i$排序，然后后入廊桥，如果没有空廊桥，对所有廊桥内的飞机按照$b_i$排序后飞离$b_i<a_i$的
优化1：需要多次排序使用优先队列
## [CSP-S 2021] 括号序列
小 w 定义“超级括号序列”是由字符 `(`、`)`、`*` 组成的字符串，并且对于某个给定的常数 $k$，给出了“符合规范的超级括号序列”的定义如下：
1. `()`、`(S)` 均是符合规范的超级括号序列，其中 `S` 表示任意一个仅由**不超过k个**字符 `*` 组成的非空字符串（以下两条规则中的 `S` 均为此含义）；
2. 如果字符串 `A` 和 `B` 均为符合规范的超级括号序列，那么字符串 `AB`、`ASB` 均为符合规范的超级括号序列，其中 `AB` 表示把字符串 `A` 和字符串 `B` 拼接在一起形成的字符串；
3. 如果字符串 `A` 为符合规范的超级括号序列，那么字符串 `(A)`、`(SA)`、`(AS)` 均为符合规范的超级括号序列。
4. 所有符合规范的超级括号序列均可通过上述 3 条规则得到。
例如，若 $k = 3$，则字符串 `((**()*(*))*)(***)` 是符合规范的超级括号序列，但字符串 `*()`、`(*()*)`、`((**))*)`、`(****(*))` 均不是。特别地，空字符串也不被视为符合规范的超级括号序列。

现在给出一个长度为 $n$ 的超级括号序列，其中有一些位置的字符已经确定，另外一些位置的字符尚未确定（用 `?` 表示）。小 w 希望能计算出：有多少种将所有尚未确定的字符一一确定的方法，使得得到的字符串是一个符合规范的超级括号序列？
##
集训队选手在题解中写道：这道题考场杀我2.5h，写了两个错误算法，最后写了一个 O($n^4$)，然后优化成 O($n^3$) 了。
## 
这个数据范围，这个括号序列，一眼区间dp
但是限制多，转移困难，还可能漏，我不会。
##
欣赏一下队爷的做法：[原文](https://www.luogu.com.cn/article/taicfpja)
给诸位讲一下$O(n^4)$的做法

## 括号序列
[一个题单](https://www.luogu.com.cn/training/526300#information)
## [CSP-S 2021] 回文

给定正整数 $n$ 和整数序列 $a_1, a_2, \ldots, a_{2 n}$，在这 $2 n$ 个数中，$1, 2, \ldots, n$ 分别各出现恰好 $2$ 次。现在进行 $2 n$ 次操作，目标是创建一个长度同样为 $2 n$ 的序列 $b_1, b_2, \ldots, b_{2 n}$，初始时 $b$ 为空序列，每次可以进行以下两种操作之一：

1. 将序列 $a$ 的开头元素加到 $b$ 的末尾，并从 $a$ 中移除。
2. 将序列 $a$ 的末尾元素加到 $b$ 的末尾，并从 $a$ 中移除。

我们的目的是让 $b$ 成为一个**回文数列**，即令其满足对所有 $1 \le i \le n$，有 $b_i = b_{2 n + 1 - i}$。请你判断该目的是否能达成，如果可以，请输出字典序最小的操作方案，具体在【**输出格式**】中说明。

##
**Hint1**:第一个元素只能从$a_1$或$a_{2n}$中选取，不妨假设先使用L选$a_1$
**Hint2**:可以找出pos,使得$a_{pos} = a_1$,a[2……2n]被分为a[2……pos-1],a[pos],a[pos+1……2n],将前后两段看作双端队列，操作为出队头
**Hint3**:由回文性质，一个数当且仅当同时位于队头和队尾才可将其删除，且优先出左边的队头，否则无解
**Hint4**:重复以上过程
## [CSP-S 2021] 交通规划

给定一个平面上 $n$ 条水平直线和 $m$ 条垂直直线，它们相交形成 $n$ 行 $m$ 列的网格，从上到下第 $r$ 条水平直线和从左到右第 $c$ 条垂直直线之间的交点称为格点 $(r, c)$。网格中任意两个水平或垂直相邻的格点之间的线段称为一条边，每条边有一个非负整数边权。
进行 $T$ 次询问，每次询问形式如下：
给出 $k$（$T$ 次询问的 $k$ 可能不同）个附加点，每个附加点位于一条从网格边缘向外出发的射线上。所有从网格边缘向外出发的射线按左上-右上-右下-左下-左上的顺序依次编号为 $1$ 到 $2 n + 2 m$，如下图：
![#c h:200](https://cdn.luogu.com.cn/upload/image_hosting/iwajnac8.png)
对于每次询问，不同附加点所在的射线互不相同。每个附加点和最近的格点之间的线段也称为一条边，也有非负整数边权（注意，在角上的格点有可能和两个附加点同时相连）。
给定每个附加点的颜色（黑色或者白色），请你将网格内每个格点的颜色染成黑白二者之一，并使得所有两端颜色不同的边的边权和最小。请输出这个最小的边权和。
## 
自己补题
可以先写一下[[BJOI2006] 狼抓兔子](https://hydro.ac/d/bzoj/p/1001)
## 欢迎交流~~~~~
<!-- _class: trans -->
<!-- _footer: "" -->
<!-- _paginate: "" -->
<div>
<img src = "./images/R-C.png" style = "background-color: rgba(0, 0, 0, 0); margin-left: 400px;margin-bottom: px;" width = 300 >
</div>

